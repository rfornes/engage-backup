!function(a, b) {
    function c() {
        this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent), 
        this.isset = function(a, b) {
            var c = o;
            return p && (c = o[p]), "undefined" != typeof c;
        }, this.tmpl = function(a, b) {
            if (a && "object" == typeof b) return a.replace(/\{([\w\.]*)\}/g, function(a, c) {
                for (var d = c.split("."), e = b[d.shift()], f = 0, g = d.length; f < g; f++) e = e[d[f]];
                return "undefined" != typeof e && null !== e ? e : "";
            });
        };
    }
    a.Utils = new c();
}(window, document), function(a, b) {
    function c(a, c) {
        this.xchg = c.xchg || !0, this.windowSize = (window.innerWidth || b.documentElement.clientWidth || b.body.clientWidth) <= 200 ? "small" : "medium";
        var e = "small" == this.windowSize;
        this.itemsPerPage = e ? 2 : c.itemsperpage, this.itemsPerRow = e ? 1 : c.itemsperrow, 
        this.loginId = c.loginId || "", this.channelId = c.channelid || "", this.loading = !1, 
        this.isLastPage = !1, this.page = 0, this.el = "string" == typeof a ? b.getElementById(a) : a, 
        this.loadBtn = this.el.getElementsByClassName("tvp-sidebar-load")[0], this.container = this.el.getElementsByClassName("tvp-sidebar-container")[0], 
        this.render = function() {
            this.container.innerHTML = "";
            for (var a = this.data.slice(0), c = []; a.length; ) c.push(a.splice(0, this.itemsPerPage));
            for (var e = 0; e < c.length; e++) {
                for (var g = c[e], h = []; g.length; ) h.push(g.splice(0, this.itemsPerRow));
                for (var i = b.createDocumentFragment(), j = 0; h.length > j; j++) {
                    var k = b.createElement("div");
                    k.classList.add("tvp-clearfix");
                    for (var l = h[j], m = 0; m < l.length; m++) {
                        var n = l[m], o = "";
                        "undefined" != typeof n.entity && (o += " tvp-exchange"), "medium" === f.windowSize && (o += " col-6"), 
                        n.className = o, k.innerHTML += d(b.getElementById("videoTemplate").innerHTML, n);
                    }
                    i.appendChild(k);
                }
                this.container.appendChild(i), this.container.classList.remove("loading"), this.el.classList.add("first-render");
            }
        };
        var f = this;
        this.load = function(a) {
            f.loading = !0, f.container.classList.add("loading");
            var c = function(a) {
                var c = b.createElement("script"), d = "//api.tvpage.com/v1/channels/" + f.channelId + "/videos?X-login-id=";
                d += f.loginId + "&callback=tvpcallback&p=" + f.page + "&n=" + f.itemsPerPage, c.src = d, 
                window.tvpcallback = a, b.body.appendChild(c);
            };
            if (this.xchg) {
                var d = new XMLHttpRequest();
                d.open("GET", "//api2.tvpage.com/prod/channels?X-login-id=1", !0), d.onreadystatechange = function() {
                    d.readyState == XMLHttpRequest.DONE && c(function(b) {
                        var c = [];
                        200 === d.status && (c = d.responseText), b.length || (f.isLastPage = !0), f.data = b, 
                        a(b.concat(c)), f.loading = !1;
                    });
                }, d.send({
                    p: 0,
                    n: 1e3,
                    si: 1,
                    li: 1,
                    "X-login-id": 1
                });
            } else c(function(b) {
                (!b.length || b.length < f.itemsPerPage) && (f.isLastPage = !0), f.data = b, a(b), 
                f.loading = !1;
            });
        }, this.next = function() {
            this.isLastPage ? (this.page = 0, this.isLastPage = !1) : this.page++;
        }, this.resize = function(a) {
            var d = (window.innerWidth || b.documentElement.clientWidth || b.body.clientWidth) <= 200 ? "small" : "medium", e = function() {
                a && "function" == typeof a && setTimeout(a, 0);
            };
            if (f.windowSize === d) e(); else {
                f.windowSize = d;
                var g = "small" === d;
                f.itemsPerPage = g ? 2 : c.itemsperpage, f.itemsPerRow = g ? 1 : c.itemsperrow, 
                f.load(function() {
                    f.render(), e();
                });
            }
        }, this.loadBtn.onclick = function() {
            f.loading || (f.next(), f.load(function(a) {
                a.length ? f.render(a) : (f.next(), f.load(function(a) {
                    f.render(a);
                }));
            }));
        }, this.load(function(a) {
            f.render(a);
        });
    }
    var d = function(a, b) {
        if (a && "object" == typeof b) return a.replace(/\{([\w\.]*)\}/g, function(a, c) {
            for (var d = c.split("."), e = b[d.shift()], f = 0, g = d.length; f < g; f++) e = e[d[f]];
            return "undefined" != typeof e && null !== e ? e : "";
        });
    };
    a.Grid = c;
}(window, document), function(a, b) {
    var c = [], d = Widget.videosObj;
    for (var e in d) c.push(d[e]);
    var f = Widget.settings;
    f.data = c;
    var g = f.name, h = new Grid(g, f);
    window["_tvp_" + g] = h, a.getElementById(g).addEventListener("click", function(d) {
        var e = d.target;
        if (e.classList.contains("tvp-video")) {
            for (var f = e.id.split("-").pop(), h = {}, i = 0; i < c.length; i++) c[i].id === f && (h = c[i]);
            var j = a.createElement("div");
            j.classList.add("tvp-modal-overlay");
            var k = a.createDocumentFragment();
            k.appendChild(j);
            var l = a.createElement("div");
            l.classList.add("tvp-modal"), l.innerHTML = b.tmpl(a.getElementById("modalTemplate").innerHTML, {
                src: Widget.baseUrl + "/tvpwidget/" + g + "-modal" + (b.isMobile ? "-mobile" : ""),
                title: h.title || ""
            }), k.appendChild(l);
            var m = function() {
                j.removeEventListener("click", m, !1), j.remove(), l.remove();
            };
            k.querySelector(".tvp-modal-close").addEventListener("click", m), j.addEventListener("click", m);
            var n = k.querySelector(".tvp-iframe-modal");
            n.onload = function() {
                var a = this, b = a.contentWindow, d = a.contentWindow.document;
                b.postMessage({
                    selected: f,
                    videos: c,
                    page: 0
                }, Widget.baseUrl);
                var e = d.body.querySelector(".iframe-content"), g = 0;
                !function b() {
                    setTimeout(function() {
                        if (e.querySelector(".tvp-products").classList.contains("first-render")) {
                            var c = window.getComputedStyle(d.body, null);
                            a.style.height = e.clientHeight + parseFloat(c.paddingTop) + parseFloat(c.paddingBottom) + "px";
                        } else ++g < 20 ? b() : console.log("limit reached");
                    }, 200);
                }();
            }, parent.document.body.appendChild(k);
        }
    });
}(document, Utils);